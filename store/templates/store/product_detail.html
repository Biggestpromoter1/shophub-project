{% extends 'store/base.html' %}

{% block title %}{{ product.name }} - ShopHub{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-6">
        {% if product.image %}
        <img src="{{ product.image.url }}" class="img-fluid" alt="{{ product.name }}">
        {% else %}
        <div class="bg-secondary" style="height: 400px;"></div>
        {% endif %}
    </div>
    <div class="col-md-6">
        <h1>{{ product.name }}</h1>
        <p class="text-muted">Category: {{ product.category.name }}</p>
        <h3 class="text-primary">${{ product.price }}</h3>
        <p>{{ product.description }}</p>
        
        {% if product.is_in_stock %}
        <p class="text-success">In Stock ({{ product.stock }} available)</p>
        <form method="post" action="#">
            {% csrf_token %}
            <button type="submit" class="btn btn-success btn-lg">Add to Cart</button>
        </form>
        {% else %}
        <p class="text-danger">Out of Stock</p>
        {% endif %}
    </div>
</div>

{% if related_products %}
<h3 class="mt-5">Related Products</h3>
<div class="row">
    {% for product in related_products %}
    <div class="col-md-3">
        <div class="card">
            {% if product.image %}
            <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
            {% endif %}
            <div class="card-body">
                <h6>{{ product.name }}</h6>
                <p>${{ product.price }}</p>
                <a href="{% url 'store:product_detail' product.slug %}" class="btn btn-sm btn-primary">View</a>
            </div>
        </div>
    </div>
    <li class="list-group-item d-flex justify-content-between">
    {{ category.name }}
    <span class="badge bg-primary">
        {{ category.product_count }}
    </span>
</li>
    {% endfor %}
</div>
{% endif %}
{% endblock %}